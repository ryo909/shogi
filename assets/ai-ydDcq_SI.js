const h={P:100,L:300,N:400,S:500,G:600,B:800,R:1e3,K:1e4,"+P":600,"+L":600,"+N":600,"+S":600,"+B":1e3,"+R":1200},p=(r,c)=>{const e=[],f=r.state;for(let t=0;t<9;t++)for(let o=0;o<9;o++){const n=f.board[t][o];if(n&&n.owner===c){const s=r.getLegalMoves({x:o,y:t});e.push(...s)}}const a=f.hands[c];for(const t of Object.keys(a))if(a[t]>0){const o=r.getDropMoves(t,c);e.push(...o)}if(e.length===0)return null;let i=e[0],d=-1/0;const l=e.sort(()=>Math.random()-.5);for(const t of l){let o=0;if(!t.drop){const s=f.board[t.to.y][t.to.x];if(s){if(s.type==="K")return t;o+=h[s.type]}}t.promoted&&(o+=200);const n=Math.abs(t.to.x-4)+Math.abs(t.to.y-4);o-=n*10,o>d&&(d=o,i=t)}return i};export{p as getBestMove};
